CREATE TABLE EMPLOYEE
(EMPLOYEE_ID INT,
EMP_FIRSTNAME VARCHAR2(50),
EMP_LASTNAME VARCHAR2(50),
DEPARTMENT_ID INT,
SALARY FLOAT,
EMP_EMAIL VARCHAR2(50),
CONSTRAINT PK_EMPLOYEE PRIMARY KEY (EMPLOYEE_ID)
);


CREATE TABLE DEPARTMENT
(DEPARTMENT_ID INT,
DEPARTMENT_NAME VARCHAR2(50),
CONSTRAINT PK_DEPARTMENT PRIMARY KEY (DEPARTMENT_ID));

ALTER TABLE EMPLOYEE ADD CONSTRAINT FK_DEPT_ID 
FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT 
(DEPARTMENT_ID);
/
CREATE OR REPLACE PROCEDURE SP_GIVE_RAISE
(
DEPT_ID IN INT,
AVERAGE_SALARY OUT FLOAT)
AS 
BEGIN
UPDATE EMPLOYEE SET SALARY = SALARY+(SALARY * .10)
WHERE DEPARTMENT_ID = DEPT_ID;
SELECT AVG(SALARY) INTO AVERAGE_SALARY FROM EMPLOYEE WHERE DEPARTMENT_ID=DEPT_ID;
COMMIT;

END;
/
DEFINE FLOAT AVG_SALARY;
exec SP_GIVE_RAISE(1000,:AVG_SALARY);
DBMS_
/
CREATE SEQUENCE dept_seq
MINVALUE 1000
START WITH 1000
INCREMENT BY 1;
/
CREATE SEQUENCE emp_seq
MINVALUE 1000
START WITH 1000
INCREMENT BY 1;
/

INSERT INTO DEPARTMENT VALUES (dept_seq.nextval, 'Sales');
INSERT INTO DEPARTMENT VALUES (dept_seq.nextval, 'IT');
INSERT INTO DEPARTMENT VALUES (dept_seq.nextval, 'Research');


INSERT INTO EMPLOYEE VALUES (dept_seq.nextval, 'Ivan','Trochev',1001,30000,'itrochev@company.com');
INSERT INTO EMPLOYEE VALUES (dept_seq.nextval, 'George','Bell',1002,34000,'gbell@company.com');
INSERT INTO EMPLOYEE VALUES (dept_seq.nextval, 'Huey','Lewis',1002,37000,'hlewis@company.com');
INSERT INTO EMPLOYEE VALUES (dept_seq.nextval, 'Amy','Cho',1002,36000,'acho@company.com');
COMMIT;
SELECT * FROM DEPARTMENT;
SELECT * FROM EMPLOYEE;
UPDATE EMPLOYEE SET SALARY = 35000 WHERE EMPLOYEE_ID=1003;
UPDATE EMPLOYEE SET SALARY = 37000 WHERE EMPLOYEE_ID=1004;
